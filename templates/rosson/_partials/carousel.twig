{% set slides = entry.carouselSlides.all %}

{% set carousel = {
    mode: 'crop',
    width: 650,
    height: 343,
    quality: 100
} %}

<!-- Slider main container -->
<div class="swiper">
  <!-- Additional required wrapper -->
  <div class="swiper-wrapper">
    <!-- Slides -->
    {% for slide in slides %}
      <div class="swiper-slide flex flex-col md:flex-row">
        {% set image = slide.image.one() %}

          {% set slideImage %}
            <img class="w-full" src="{{ image.url(carousel) }}" alt="{{ image.alternativeText|length ? image.alternativeText|length : image.title }}" />
          {% endset %}
        
          <div class="flex-shrink-0 block w-full md:w-2/3">
            {% if slide.imageLink.getUrl|length %}
              <a href="{{ slide.imageLink }}">{{ slideImage }}</a>
            {% else %}
              {{ slideImage }}
            {% endif %}
          </div>
        {% if slide.caption|length or slide.description|length %}
          <div class="text-center md:text-left p-6 sm:p-6 md:p-5 lg:p-12 pl-6 w-100%">
            <h2 class="text-3xl text-gray-700 mb-3">{{ slide.caption }}</h2>
            <p class="text-lg mb-4">{{ slide.description }}</p>
            {% if slide.imageLink.getUrl|length %}
              <a class="btn mx-auto md:ml-0 flex align-middle bg-sage rounded px-4 py-2 text-xl font-bold uppercase w-max mb-0" href="{{ slide.imageLink }}">{{ slide.imageLink.title }}</a>
            {% endif %}
          </div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
  <!-- If we need pagination -->
  {# <div class="swiper-pagination"></div> #}

  <!-- If we need navigation buttons -->
  <div class="swiper-button-prev flex items-center opacity-20 bg-gray-600 px-6 hover:opacity-60 transition-all duration-300 left-0 top-0 h-full translate-y-0 mt-0 text-white"></div>
  <div class="swiper-button-next flex items-center opacity-20 bg-gray-600 px-6 hover:opacity-60 transition-all duration-300 right-0 top-0 h-full translate-y-0 mt-0 text-white"></div> 
</div>

{# Minified Swiper CSS v7.3.1 #}
{% css "https://unpkg.com/swiper@7/swiper-bundle.min.css" %}

{# Minified Swiper JavaScript v7.3.1 #}
{% js "https://unpkg.com/swiper@7/swiper-bundle.min.js" %}

{% js %}
  documentReady(() => {
    //initialize swiper when document ready
    const swiper = new Swiper('.swiper', {
      // Optional parameters
      loop: true,
      speed: 900,

      autoplay: {
        delay: {{ entry.carouselInterval * 1000 }},
      },

      // If we need pagination
      // pagination: {
      //   el: '.swiper-pagination',
      // },

      // Navigation arrows
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },

      // And if we need scrollbar
      // scrollbar: {
      //   el: '.swiper-scrollbar',
      // },
    });

  });
{% endjs %}

